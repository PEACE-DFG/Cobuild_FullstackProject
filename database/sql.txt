CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255),
    email VARCHAR(255) UNIQUE,
    password VARCHAR(255),
    user_type ENUM('investor', 'builder'),
    phone_number VARCHAR(15),
    registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE projects (
    id INT AUTO_INCREMENT PRIMARY KEY,
    builder_id INT,
    title VARCHAR(255),
    description TEXT,
    location VARCHAR(255),
    status ENUM('pending', 'live', 'completed', 'under_review'),
    land_title_document VARCHAR(255),
    verification_status ENUM('unverified', 'verified'),
    verification_fee_paid BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (builder_id) REFERENCES users(id)
);


CREATE TABLE investments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    project_id INT,
    investor_id INT,
    investment_type ENUM('labor', 'cash', 'materials'),
    investment_value DECIMAL(10,2),  -- Hours for labor, amount for cash, quantity for materials
    investment_description TEXT,
    certificate_url VARCHAR(255),
    status ENUM('pending', 'completed'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES projects(id),
    FOREIGN KEY (investor_id) REFERENCES users(id)
);


CREATE TABLE labor_tracking (
    id INT AUTO_INCREMENT PRIMARY KEY,
    investment_id INT,
    hours_worked DECIMAL(5,2),
    evidence_url VARCHAR(255),  -- URL to the uploaded picture
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (investment_id) REFERENCES investments(id)
);


CREATE TABLE featured_projects (
    id INT AUTO_INCREMENT PRIMARY KEY,
    project_id INT,
    featured_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (project_id) REFERENCES projects(id)
);


CREATE TABLE user_preferences (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    preference_type ENUM('project_interest', 'investment_type'),
    preference_value VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(id)
);


ALTER TABLE users ADD COLUMN unique_code VARCHAR(10) UNIQUE;


        $mail->Username   = 'Officialcobuild@gmail.com';  // Your email
        $mail->Password   = 'udodjurhumdfrsim'; 


  
  CREATE TABLE admins (
    id INT(11) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    phone_number VARCHAR(15) NOT NULL,
    unique_code VARCHAR(10) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
